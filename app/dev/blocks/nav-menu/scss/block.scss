/*


--icon
--icon-space
--color-background
--color-background-active
--color-background-hover
--color-text-active
--color-icon
--link-padding
--divider
--submenu-space
--submenu-rounded
--submenu-padding
--submenu-gap
--submenu-icon
--submenu-icon-space
--color-submenu-background
--color-submenu-background-hover
--color-submenu-text-hover
--color-submenu-text
--color-submenu-icon
--color-submenu-divider-hover
--color-submenu-background-active
--color-submenu-text-active
--submenu-link-padding
--submenu-border
--submenu-divider


*/


.wpbs-nav-menu {

  &.is-style-dropdown.--icon-below {
    .wpbs-nav-menu-container {
      & > li > a {

        &:after {
          position: absolute;
          top: 100%;
          left: 50%;
          transform: translateX(-50%);
          text-align: center;
        }

      }
    }
  }

  &.is-style-dropdown.--divider {

    .wpbs-nav-menu-container {

      & > li:not(:last-of-type) > a {
        @apply relative;

        &:before {
          content: '';
          border-left: var(--divider, none);
          top: 0;
          right: 0;
          height: 100%;
          position: absolute;
          transform: translateX(calc(var(--column-gap, 1px) / 2));

        }
      }

    }


  }

  .wpbs-nav-menu-container {
    & > li.current-menu-item:not(:hover),
    & > li.current-menu-ancestor:not(:hover) {

      & > a {
        color: var(--color-text-active, inherit) !important;
        background-color: var(--color-background-active, transparent);
      }
    }

    & > li {
      @apply relative;

      &:hover > a {
        background-color: var(--color-background-hover, transparent);
      }

      &.current-menu-item > a,
      &.current-menu-ancestor > a {
        background-color: var(--color-background-active, transparent);
        color: var(--color-text-active, inherit);
      }

      & > a {
        padding: var(--link-padding, initial);
        background-color: var(--color-background, transparent);
        @apply whitespace-nowrap flex transition-colors duration-200 relative items-center no-underline;

      }

      &.menu-item-has-children {
        & > a {
          gap: var(--icon-space, .3rem);
        }

        &:hover > a:after,
        &.active > a:after {
          color: inherit;
        }

        & > a {
          &:after {
            color: var(--color-icon, inherit);
            content: var(--icon, '\f078');
            transition-timing-function: ease-in-out;
            font-family: 'Font Awesome 6 Pro', sans-serif;
            @apply aspect-square transition-transform duration-300 flex text-center justify-center items-center pointer-events-none;
          }
        }

      }
    }

    & > li > .sub-menu {

      & > li {
        &:last-of-type {
          border-bottom: none;
        }

        &:hover > a,
        & > a:hover {
          color: var(--color-submenu-text-hover, var(--color-submenu-text, black)) !important;
        }

        &:hover > a {
          background-color: var(--color-submenu-background-hover, var(--color-submenu-background, #efefef));
        }

        &.current-menu-item > a:not(:hover),
        &.current-menu-ancestor > a:not(:hover) {
          color: var(--color-submenu-text-active, inherit) !important;
          background-color: var(--color-submenu-background-active, var(--color-submenu-background, #efefef)) !important;
        }

        & > a {
          color: var(--color-submenu-text, black);
          background-color: var(--color-submenu-background, white);
          padding: var(--submenu-link-padding, initial);
          transition-duration: 300ms;
          @apply transition-colors block;
        }
      }
    }
  }

  &.is-style-dropdown:not(.--icon-below) .wpbs-nav-menu-container {
    & > li {
      &.menu-item-has-children {
        &:hover > a:after {
          @apply rotate-180;
        }
      }
    }
  }

  &.--submenu-divider {
    .wpbs-nav-menu-container > li > .sub-menu > li {
      position: relative;

      &:after {
        content: '';
        position: absolute;
        top: 100%;
        left: 0;
        width: 100%;
        border-bottom: var(--submenu-divider, none);
        transform: translateY(calc(var(--submenu-gap, 1px) / 2));
      }

      &:last-of-type:after {
        content: none;
      }
    }
  }

  .wpbs-nav-menu-container > li > .sub-menu {
    display: flex;
    flex-direction: column;
    gap: var(--submenu-gap, 0px);
  }

  &.is-style-dropdown .wpbs-nav-menu-container {
    @apply flex;

    & > li > .sub-menu.offset-right {
      right: 0;
      left: auto;
      transform: translateX(0px);
    }

    & > li > .sub-menu.offset-left {
      left: 0;
      transform: translateX(0px);
    }

    & > li > .sub-menu {
      width: max(100%, 12rem);
      top: 100%;
      left: 50%;
      padding-top: var(--submenu-space, .7rem);
      transition: opacity .3s;
      position: absolute;
      background-color: transparent;
      transform: translateX(-50%);
      @apply flex flex-col text-left opacity-0 pointer-events-none absolute z-50;

      & > li:first-of-type {
        border-radius: var(--submenu-rounded, 6px) var(--submenu-rounded, 6px) 0 0;
      }

      & > li:last-of-type {
        border-radius: 0 0 var(--submenu-rounded, 6px) var(--submenu-rounded, 6px);
      }

      & > li:only-of-type {
        border-radius: var(--submenu-rounded, 6px);
      }

      & > li {
        @apply w-full overflow-hidden;
      }

      & > li > a {
        @apply block w-full;
      }
    }

    & > li:hover > .sub-menu {
      max-width: min(20rem, 100vw);
      @apply opacity-100 pointer-events-auto;
    }
  }

  &.is-style-accordion .wpbs-nav-menu-container {
    @apply w-full flex flex-col;

    & > li {
      @apply w-full block;

      &.menu-item-has-children {

        & > a {
          padding-right: calc(var(--submenu-icon-space, 0px) + 1.5em);

          &:after {
            margin-right: var(--submenu-icon-space, 10px);
            top: 50%;
            right: 0;
            height: 1.2em;
            transform: translateY(-50%);
            @apply absolute w-auto text-inherit;
          }
        }
      }

    }

    & li > a {
      @apply w-full;
    }

    & > li > .sub-menu {
      background-color: var(--color-submenu-background, transparent);
      border-radius: var(--submenu-rounded, initial);
      border: var(--submenu-border, none);
      overflow: hidden;
      padding: var(--submenu-padding, initial);
      gap: var(--submenu-gap, 0px);
      margin-top: var(--submenu-space, 0px);

      @apply w-full hidden flex-col;
    }

    & > li.active > .sub-menu {
      @apply flex
    }

    & > li > a {
      display: block;
      padding: var(--submenu-link-padding, initial);
    }
  }

  &.is-style-accordion .wpbs-nav-menu-container {
    & > li.active > a:after {
      transform: translateY(-50%) rotate(180deg);
    }
  }


}
